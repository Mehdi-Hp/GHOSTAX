{"version":3,"file":"dropdown.iife.js","sources":["../../../node_modules/uuid/lib/bytesToUuid.js","../../../node_modules/uuid/lib/rng-browser.js","../../../node_modules/uuid/v4.js","../src/helpers.js","../src/dropdownItem.js","../src/dropdown.js"],"sourcesContent":["/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","const deepMerge = require('deepmerge');\n\n\nconst hasClickedAway = (element, event) => {\n  return !element.contains(event.target);\n};\n\nexport { hasClickedAway };\n\n\nconst listHelpers = {\n  normalize(list = [], currentValue) {\n    return list.map((item) => {\n      const newList = {\n        ...item,\n        isSelected: item.isSelected || currentValue == item.id || false,\n        isHighlighted: item.isHighlighted || false\n      };\n      return newList;\n    });\n  }\n};\n\nexport { listHelpers };\n\n\nconst optionsHelpers = {\n  normalize(options, defaultOption) {\n    return deepMerge(defaultOption, options);\n  },\n  validate(passedOptions, defaultOptions) {\n    Object.keys(passedOptions).forEach((passedOptionKey) => {\n      if (!defaultOptions.hasOwnProperty(passedOptionKey)) {\n        console.error(`${passedOptionKey} doesn't seem to be a valid option. valid options are -> ${defaultOptions}`);\n      }\n    });\n  }\n};\n\nexport { optionsHelpers };\n","const DropdownItem = {\n  props: {\n    instanceId: {\n      type: String,\n      required: true\n    },\n    list: {\n      type: Array,\n      required: true\n    },\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      isSelected: false,\n      isHighlighted: false\n    };\n  },\n  methods: {\n    highlight(item) {\n      item.isHighlighted = true;\n    },\n    blur(item) {\n      item.isHighlighted = false;\n    },\n    select(item) {\n      const previouslySelected = this.list.find((item) => {\n        return item.isSelected;\n      });\n      if (previouslySelected) {\n        previouslySelected.isSelected = false;\n      }\n      item.isSelected = !item.isSelected;\n      // EventBus.$emit(`dropdownue:changeValue${this.instanceId}`, item.id);\n      this.$emit('change', item.id);\n    },\n    getItemEvents(item) {\n      return {\n        mouseover: () => {\n          this.highlight(item);\n        },\n        mouseout: () => {\n          this.blur(item);\n        },\n        click: () => {\n          this.select(item);\n        }\n      };\n    }\n  },\n  render() {\n    return this.$scopedSlots.default({\n      isSelected: this.item.isSelected,\n      isHighlighted: this.item.isHighlighted,\n\n      highlight: this.highlight,\n      itemMouseoverEvent: (item) => {\n        return this.getItemEvents(item).mouseover();\n      },\n      itemMouseoutEvent: (item) => {\n        return this.getItemEvents(item).mouseout();\n      },\n      itemEvents: this.getItemEvents\n    });\n  }\n};\n\nexport { DropdownItem };\n","import uuidv4 from 'uuid/v4';\nimport { hasClickedAway, listHelpers, optionsHelpers } from './helpers';\n\n\nconst defaultOptions = {\n  closeOnSelect: true,\n  closeOnClickaway: true,\n  resetFilterOnSelect: true,\n  fields: {\n    unique: 'id',\n    label: 'label'\n  }\n};\n\nconst Dropdown = {\n  name: 'GhostaxDropdown',\n  props: {\n    rawList: {\n      type: Array,\n      required: false\n    },\n    defaultValue: {\n      type: String,\n      required: false,\n      default: undefined\n    },\n    filterQuery: {\n      type: String,\n      required: false,\n      default: ''\n    },\n    options: {\n      type: Object,\n      required: false,\n      default() {\n        return {};\n      }\n    }\n  },\n  data() {\n    return {\n      instanceId: uuidv4(),\n      isOpen: false,\n      value: this.defaultValue\n    };\n  },\n  computed: {\n    nomalizedOptions() {\n      optionsHelpers.validate(this.options, defaultOptions);\n      return optionsHelpers.normalize(this.options, defaultOptions);\n    },\n    normalizedList() {\n      return listHelpers.normalize(this.rawList, this.value);\n    },\n    listToRender() {\n      return this.normalizedList.filter((item) => {\n        return item[this.nomalizedOptions.fields.label].includes(this.filterQuery);\n      });\n    }\n  },\n  watch: {\n    isOpen() {\n      if (this.isOpen) {\n        document.addEventListener('click', this.handleClickAway);\n        document.addEventListener('keydown', this.handleClickAway);\n      } else {\n        document.removeEventListener('click', this.handleClickAway);\n        document.removeEventListener('keydone', this.handleClickAway);\n      }\n    }\n  },\n  mounted() {\n    this.normalizeOptions();\n    this.listenOnChangeValue();\n  },\n  methods: {\n    normalizeOptions() {\n      this.normalizedOptions = optionsHelpers.normalize(this.options);\n    },\n    listenOnChangeValue() {\n      // EventBus.$on(`ghostax/dropdown:changeValue${this.instanceId}`, (newValue) => {\n      //   this.select(newValue);\n      // });\n    },\n    handleClickAway(event) {\n      if (hasClickedAway(this.$el, event) || event.key === 'Escape') {\n        this.close();\n      }\n    },\n    open() {\n      this.isOpen = true;\n      this.$emit('open');\n    },\n    close() {\n      this.isOpen = false;\n      this.$emit('close');\n    },\n    toggle() {\n      this.isOpen = !this.isOpen;\n      this.$emit('toggle', this.isOpen);\n    },\n    filterList(query) {\n      if (query) {\n        this.listToRender = this.normalizedList.filter((item) => {\n          return item[this.nomalizedOptions.fields.label].includes(query);\n        });\n      } else {\n        this.listToRender = this.normalizedList;\n      }\n    },\n    select(value) {\n      this.value = value;\n      this.$emit('change', value);\n      if (this.closeOnSelect) {\n        this.close();\n      }\n      if (this.resetOnSelect) {\n        this.filterList('');\n      }\n    }\n  },\n  render() {\n    return this.$scopedSlots.default({\n      instanceId: this.instanceId,\n      isOpen: this.isOpen,\n      isClosed: !this.isOpen,\n      value: this.value,\n      listToRender: this.listToRender,\n\n      open: this.open,\n      close: this.close,\n      toggle: this.toggle,\n      filter: this.filter\n    });\n  }\n};\n\nexport { Dropdown };\nexport { DropdownItem } from './dropdownItem';\n"],"names":["getRandomValues","crypto","bind","msCrypto","window","rnds8","Uint8Array","module","rnds","Array","r","i","Math","random","byteToHex","toString","substr","buf","offset","bth","join","options","rng","ii","bytesToUuid","deepMerge","require","listHelpers","list","currentValue","map","item","isSelected","id","isHighlighted","optionsHelpers","defaultOption","passedOptions","defaultOptions","Object","keys","forEach","passedOptionKey","hasOwnProperty","console","error","DropdownItem","props","instanceId","type","String","required","data","methods","highlight","blur","select","previouslySelected","this","find","$emit","getItemEvents","mouseover","_this","mouseout","click","render","$scopedSlots","default","itemMouseoverEvent","_this2","itemMouseoutEvent","itemEvents","closeOnSelect","closeOnClickaway","resetFilterOnSelect","fields","unique","label","Dropdown","name","rawList","defaultValue","undefined","filterQuery","uuidv4","isOpen","value","computed","nomalizedOptions","normalizedList","listToRender","filter","includes","watch","document","addEventListener","handleClickAway","removeEventListener","mounted","normalizeOptions","listenOnChangeValue","normalizedOptions","event","element","contains","target","hasClickedAway","$el","key","close","open","toggle","filterList","query","resetOnSelect","isClosed"],"mappings":"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"}