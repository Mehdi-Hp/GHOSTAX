{"version":3,"file":"vue-router.esm.js","sources":["../src/_helpers.js","../src/vue-router.js"],"sourcesContent":["import Vue from 'vue';\n\nconst deepMerge = require('deepmerge');\n\nconst isPromise = (value) => {\n  return Boolean(value && typeof value.then === 'function');\n};\n\nconst optionsHelpers = {\n  normalize(defaultOption) {\n    return Vue.observable(\n      deepMerge(defaultOption, this.options)\n    );\n  },\n  validate(defaultOptions) {\n    Object.keys(this.options).forEach((passedOptionKey) => {\n      if (!defaultOptions.hasOwnProperty(passedOptionKey)) {\n        console.error(`${passedOptionKey} doesn't seem to be a valid option. valid options are -> ${defaultOptions}`);\n      }\n    });\n  }\n};\n\nexport {\n  isPromise,\n  optionsHelpers\n};\n","import { isPromise, optionsHelpers } from './_helpers';\n\nconst defaultOptions = {\n  fields: {\n    data: 'data'\n  }\n};\n\nexport default {\n  name: 'PromiseObserver',\n  props: {\n    promise: {\n      type: [Object],\n      required: true,\n      validator(value) {\n        return isPromise(value);\n      }\n    }\n  },\n  data() {\n    return {\n      hasFulfilled: false,\n      hasRejected: false,\n      mainData: null,\n      response: null,\n      reason: '',\n      isPending: false\n    };\n  },\n  watch: {\n    promise: {\n      immediate: true,\n      handler() {\n        if (this.hasPromise) {\n          this.getReadyForNewOne();\n          this.observe();\n        }\n      }\n    }\n  },\n  computed: {\n    normalizedOptions() {\n      optionsHelpers.validate.apply(this, [defaultOptions]);\n      return optionsHelpers.normalize.apply(this, [defaultOptions]);\n    },\n    hasPromise() {\n      return !!this.promise && isPromise(this.promise);\n    },\n    state() {\n      if (this.hasRejected) {\n        return 'rejected';\n      }\n      if (this.hasFulfilled) {\n        return 'fulfilled';\n      }\n    }\n  },\n  methods: {\n    getReadyForNewOne() {\n      this.hasFulfilled = false;\n      this.hasRejected = false;\n      this.response = null;\n      this.mainData = null;\n    },\n    observe() {\n      this.isPending = true;\n      this.promise\n        .then((response) => {\n          this.hasFulfilled = true;\n          this.response = response;\n          this.mainData = response?.[this.normalizedOptions.fields.data];\n        })\n        .catch((error) => {\n          this.hasRejected = true;\n          this.reason = error;\n        })\n        .finally(() => {\n          this.isPending = false;\n        });\n    }\n  },\n  render(h) {\n    if (this.hasPromise) {\n      return this.$scopedSlots.default({\n        state: this.state,\n\n        isPending: this.isPending,\n\n        hasFulfilled: this.hasFulfilled,\n        response: this.response,\n        mainData: this.mainData,\n\n        hasRejected: this.hasRejected,\n        reason: this.reason\n      });\n    }\n  }\n};\n"],"names":["deepMerge","require","isPromise","value","Boolean","then","optionsHelpers","normalize","defaultOption","Vue","observable","this","options","validate","defaultOptions","Object","keys","forEach","passedOptionKey","hasOwnProperty","console","error","fields","data","name","props","promise","type","required","validator","hasFulfilled","hasRejected","mainData","response","reason","isPending","watch","immediate","handler","hasPromise","getReadyForNewOne","observe","computed","normalizedOptions","apply","state","methods","_this","catch","finally","render","h","$scopedSlots","default"],"mappings":"mBAEA,IAAMA,EAAYC,QAAQ,aAEpBC,EAAY,SAACC,UACVC,QAAQD,GAA+B,mBAAfA,EAAME,OAGjCC,EAAiB,CACrBC,mBAAUC,UACDC,EAAIC,WACTV,EAAUQ,EAAeG,KAAKC,WAGlCC,kBAASC,GACPC,OAAOC,KAAKL,KAAKC,SAASK,QAAQ,SAACC,GAC5BJ,EAAeK,eAAeD,IACjCE,QAAQC,gBAASH,sEAA2EJ,QCf9FA,EAAiB,CACrBQ,OAAQ,CACNC,KAAM,uBAIK,CACbC,KAAM,kBACNC,MAAO,CACLC,QAAS,CACPC,KAAM,CAACZ,QACPa,UAAU,EACVC,mBAAU1B,UACDD,EAAUC,MAIvBoB,sBACS,CACLO,cAAc,EACdC,aAAa,EACbC,SAAU,KACVC,SAAU,KACVC,OAAQ,GACRC,WAAW,IAGfC,MAAO,CACLV,QAAS,CACPW,WAAW,EACXC,mBACM3B,KAAK4B,kBACFC,yBACAC,cAKbC,SAAU,CACRC,oCACErC,EAAeO,SAAS+B,MAAMjC,KAAM,CAACG,IAC9BR,EAAeC,UAAUqC,MAAMjC,KAAM,CAACG,KAE/CyB,8BACW5B,KAAKe,SAAWxB,EAAUS,KAAKe,UAE1CmB,wBACMlC,KAAKoB,YACA,WAELpB,KAAKmB,aACA,qBAIbgB,QAAS,CACPN,kCACOV,cAAe,OACfC,aAAc,OACdE,SAAW,UACXD,SAAW,MAElBS,mCACON,WAAY,OACZT,QACFrB,KAAK,SAAC4B,GACLc,EAAKjB,cAAe,EACpBiB,EAAKd,SAAWA,EAChBc,EAAKf,SAAWC,MAAAA,SAAAA,EAAWc,EAAKJ,kBAAkBrB,OAAOC,QAE1DyB,MAAM,SAAC3B,GACN0B,EAAKhB,aAAc,EACnBgB,EAAKb,OAASb,IAEf4B,QAAQ,WACPF,EAAKZ,WAAY,MAIzBe,gBAAOC,MACDxC,KAAK4B,kBACA5B,KAAKyC,aAAaC,QAAQ,CAC/BR,MAAOlC,KAAKkC,MAEZV,UAAWxB,KAAKwB,UAEhBL,aAAcnB,KAAKmB,aACnBG,SAAUtB,KAAKsB,SACfD,SAAUrB,KAAKqB,SAEfD,YAAapB,KAAKoB,YAClBG,OAAQvB,KAAKuB"}